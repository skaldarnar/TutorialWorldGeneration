(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{83:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return i})),r.d(t,"metadata",(function(){return l})),r.d(t,"toc",(function(){return c})),r.d(t,"default",(function(){return s}));var n=r(3),a=r(7),o=(r(0),r(95)),i={id:"tutorial-01",title:"Rasterizer"},l={unversionedId:"tutorial-01",id:"tutorial-01",isDocsHomePage:!1,title:"Rasterizer",description:"First off, create a new module that our world generator will be located in. A guide to creating and working with modules can be found at https://github.com/MovingBlocks/Terasology/wiki/Developing-Modules.",source:"@site/docs/01_Rasterizer.md",slug:"/tutorial-01",permalink:"/docs/tutorial-01",editUrl:"https://github.com/terasology/TutorialWorldGeneration/edit/develop/docs/docs/01_Rasterizer.md",version:"current",sidebar:"someSidebar",previous:{title:"Overview",permalink:"/docs/"},next:{title:"Facet Production",permalink:"/docs/tutorial-02"}},c=[],u={toc:c};function s(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},u,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"First off, create a new module that our world generator will be located in. A guide to creating and working with modules can be found at ",Object(o.b)("a",{parentName:"p",href:"https://github.com/MovingBlocks/Terasology/wiki/Developing-Modules"},"https://github.com/MovingBlocks/Terasology/wiki/Developing-Modules"),"."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"It is recommended that the ID for the module that you've just created be different from the module in this repository, otherwise the game might use this one."))),Object(o.b)("p",null,"When the module is set up and running, add a new world generator class to it- for now, let's use this bare minimum template from the Core module:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-java",metastring:'title="TutorialWorldGenerator.java"',title:'"TutorialWorldGenerator.java"'},'@RegisterWorldGenerator(id = "tutorialWorld", displayName = "Tutorial World")\npublic class TutorialWorldGenerator extends BaseFacetedWorldGenerator{\n    @In\n    private WorldGeneratorPluginLibrary worldGeneratorPluginLibrary;\n    \n    public TutorialWorldGenerator(SimpleUri uri) {\n        super(uri);\n    }\n\n    @Override\n    protected WorldBuilder createWorld() {\n        return new WorldBuilder(worldGeneratorPluginLibrary);\n    }\n}\n')),Object(o.b)("p",null,"Next, we need to add a rasterizer - this is the class that will put blocks into the world when a chunk is generated:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-java"},"public class TutorialWorldRasterizer implements WorldRasterizer {\n    @Override\n    public void initialize() {\n    }\n\n    @Override\n    public void generateChunk(CoreChunk chunk, Region chunkRegion) {\n    }\n}\n")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"generateChunk()")," method is where the magic will happen - the ",Object(o.b)("inlineCode",{parentName:"p"},"chunk")," parameter interacts directly with chunk storage where you can place blocks, while the ",Object(o.b)("inlineCode",{parentName:"p"},"chunkRegion")," parameter holds metadata about the world.  There's nothing in the ",Object(o.b)("inlineCode",{parentName:"p"},"generateChunk()")," method right now, but we will get there soon enough :)"),Object(o.b)("p",null,"Now let's add some basic rasterization, replacing every block below y=0 with dirt."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-java"},'public class TutorialWorldRasterizer implements WorldRasterizer {\n    private Block dirt;\n\n    @Override\n    public void initialize() {\n        dirt = CoreRegistry.get(BlockManager.class).getBlock("CoreAssets:Dirt");\n    }\n\n    @Override\n    public void generateChunk(CoreChunk chunk, Region chunkRegion) {\n        for (Vector3iC position : chunkRegion.getRegion()) {\n            if (position.y() < 0) {\n                chunk.setBlock(position, dirt);\n            }\n        }\n    }\n}\n')),Object(o.b)("p",null,"Note that you should always change your coordinates from regional to local when setting the block on the chunk."),Object(o.b)("p",null,"Finally, let's add the rasterizer to the world builder:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-java"},"    @Override\n    protected WorldBuilder createWorld() {\n        return new WorldBuilder(worldGeneratorPluginLibrary)\n                .addRasterizer(new TutorialWorldRasterizer());\n    }\n")),Object(o.b)("p",null,'And after we enable the module in game and select the "Tutorial World" from the list of World Generators inside the Universe setup - voila!'),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javastacktrace"},"java.lang.IllegalStateException: No spawn height facet, elevation facet or surface height facet found. Can't place spawn point.\n")),Object(o.b)("p",null,"...well, that's not quite what we wanted. To get our world generator working, we also need to provide surface information so that the spawn algorithm can find where the surface is and gently place new players there. "))}s.isMDXComponent=!0},95:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return h}));var n=r(0),a=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},d=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=s(r),b=n,h=d["".concat(i,".").concat(b)]||d[b]||p[b]||o;return r?a.a.createElement(h,l(l({ref:t},u),{},{components:r})):a.a.createElement(h,l({ref:t},u))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var u=2;u<o;u++)i[u]=r[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,r)}b.displayName="MDXCreateElement"}}]);