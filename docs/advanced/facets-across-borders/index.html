<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/TutorialWorldGeneration/blog/rss.xml" title="World Generation Tutorial Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/TutorialWorldGeneration/blog/atom.xml" title="World Generation Tutorial Blog Atom Feed"><title data-react-helmet="true">Facets Across Borders | World Generation Tutorial</title><meta data-react-helmet="true" property="og:url" content="https://skaldarnar.github.io/TutorialWorldGeneration/docs/advanced/facets-across-borders"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Facets Across Borders | World Generation Tutorial"><meta data-react-helmet="true" name="description" content="Basic topics"><meta data-react-helmet="true" property="og:description" content="Basic topics"><link data-react-helmet="true" rel="shortcut icon" href="/TutorialWorldGeneration/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://skaldarnar.github.io/TutorialWorldGeneration/docs/advanced/facets-across-borders"><link data-react-helmet="true" rel="alternate" href="https://skaldarnar.github.io/TutorialWorldGeneration/docs/advanced/facets-across-borders" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://skaldarnar.github.io/TutorialWorldGeneration/docs/advanced/facets-across-borders" hreflang="x-default"><link rel="stylesheet" href="/TutorialWorldGeneration/assets/css/styles.8c589926.css">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/styles.66fd2269.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/runtime~main.4ece95be.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/main.744cc9b5.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/1.ca99a909.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/2.62f7332e.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/26.a3870de1.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/27.a14e5467.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/935f2afb.20716db0.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/17896441.818a151f.js" as="script">
<link rel="preload" href="/TutorialWorldGeneration/assets/js/8198f19c.2b08ff71.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TutorialWorldGeneration/"><img src="/TutorialWorldGeneration/img/logo.svg" alt="World Generation Tutorial Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/TutorialWorldGeneration/img/logo.svg" alt="World Generation Tutorial Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">World Generation Tutorial</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/TutorialWorldGeneration/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Terasology/TutorialWorldGeneration" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/TutorialWorldGeneration/"><img src="/TutorialWorldGeneration/img/logo.svg" alt="World Generation Tutorial Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/TutorialWorldGeneration/img/logo.svg" alt="World Generation Tutorial Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">World Generation Tutorial</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/TutorialWorldGeneration/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/Terasology/TutorialWorldGeneration" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-01">Rasterizer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-02">Facet Production</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-03">Noise Sampling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-04">Facet Modification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-05">Facet Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-06">Additional Facet Production</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/tutorial-07">Borders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/troubleshooting">Troubleshooting</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/TutorialWorldGeneration/docs/advanced/plugins">Plugins</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/TutorialWorldGeneration/docs/advanced/facets-across-borders">Facets Across Borders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/TutorialWorldGeneration/docs/advanced/zones">Zones</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/TutorialWorldGeneration/docs/advanced/world-viewer">World Viewer</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Knowledge Base</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/topics/biomes">Biomes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/topics/randomness">Randomness</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Noise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/topics/noise/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/topics/noise-worldgen">World Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/TutorialWorldGeneration/docs/topics/noise-implementation">Implementation</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Facets Across Borders</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-topics"></a><strong>Basic topics</strong><a class="hash-link" href="#basic-topics" title="Direct link to heading">#</a></h2><p>Many people have issues understanding what&#x27;s going on with the facets across borders.
This is a short tutorial to help you understand it better, pictures included in the following tutorials.
First of all, you need to understand the structure of how the world generation works. The Terasology developers have made a clear structure in this, so everyone is able to add new and great world generators. You have:</p><ul><li>Facets</li><li>FacetProviders</li><li>Rasterizers</li></ul><p><strong>What is a Facet?</strong>
A facet, is a side of a many-sided object. Take for instance a map of the Earth. You have a facet (or side) of the Earth that&#x27;s all about population. Meanwhile, you also have a facet that&#x27;s about differences in species across the globe!
A facet is one of these things. What does this have to do with our dear game Terasology you ask? Well, 3D-worlds are as you know not plain 3D fields with only dirt! The worlds contain objects, have properties and so on. One &#x27;facet&#x27; of the world might be the biomes. Another one could be where that certain fruit grows.</p><p><strong>What is a FacetProvider?</strong>
A FacetProvider is, as the name itself says, a class that providers the world with the appropriate facet for a certain region. What you typically do in here is scan through the blocks and check for a condition. If that condition is true, you do something, such as placing a facet on that particular coordinate which you scanned through.</p><p><strong>What is a Rasterizer?</strong>
This is where it gets intresting. A rasterizer is what interprets the Facet data. The rasterizer is where you place the blocks in the world.</p><p>Simple enough? Well, let&#x27;s get started with some tips on how to make some more complex shapes, such as pyramids.
Let us start with a problem definition, what do we want?</p><blockquote><p>We want to have a good looking pyramid to show off to my friends. It must have some sort of path to get to the center. No more than a few pyramids should spawn on a short distance, so it doesn&#x27;t get too crowded. We also want to make sure that the pyramid isn&#x27;t floating!</p></blockquote><p>Okay. That seems a whole lot of work. First things first.
We should start out with creating our classes. (Try to find the solution on these issues yourself first before copying it from here! It&#x27;s the best practice!)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-setup"></a><strong>Basic setup</strong><a class="hash-link" href="#basic-setup" title="Direct link to heading">#</a></h2><p><strong>Our Facet</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class TempleFacet extends SparseObjectFacet3D&lt;Temple&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public TempleFacet(Region3i targetRegion, Border3D border) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        super(targetRegion, border);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>Our FacetProvider</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@Requires(@Facet(value = SurfacesFacet.class, border = @FacetBorder(sides = 28, bottom = 28, top = 28)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@Produces(TempleFacet.class)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class TempleFacetProvider implements FacetProvider {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    private WhiteNoise noise;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void process(GeneratingRegion region) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override public void setSeed(long seed) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class TempleRasterizer implements WorldRasterizer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public static int getSize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void initialize() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public void generateChunk(CoreChunk chunk, Region chunkRegion) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now we have set up you can continue.
We only have to change two classes basically, the provider and the rasterizer.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="adding-the-meat"></a><strong>Adding the Meat!</strong><a class="hash-link" href="#adding-the-meat" title="Direct link to heading">#</a></h2><p><strong>The TempleFacetProvider</strong></p><p>First of all, you want to make sure you have added a border on the @Requires annotation Facet. What this does is make sure the Facet provides enough space.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@Requires(@Facet(value = SurfacesFacet.class, border = @FacetBorder(sides = 28, bottom = 28, top = 28)))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You should add a field with type <code>WhiteNoise </code>. We use this to generate randomly.
This gets the border of the TempleFacet and adds 30 by it on the sides/top/bottom.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Border3D border = region.getBorderForFacet(TempleFacet.class).extendBy(30, 30, 30);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Create a temple facet with the specified region and borders (You have made a variable above (border))</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">TempleFacet facet = new TempleFacet(region.getRegion(), border);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This takes the SurfacesFacet from the region. It&#x27;s used to get the location of the land&#x27;s surfaces, as that&#x27;s where the temples are</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">SurfacesFacet surfacesFacet = region.getRegionFacet(SurfacesFacet.class);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We will iterate over the locations where both facets are defined. Which of them is defined over a larger area may depend on other parts of the world generator, so we iterate over the locations in one, then check that they&#x27;re also in the other.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Region3i worldRegion = surfacesFacet.getWorldRegion();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>That&#x27;s about all we need to start looping and doing the nice stuff.<br>
Loop through the surface points within this region.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (int wx = worldRegion.minX(); wx &lt;= worldRegion.maxX(); wx++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (int wz = worldRegion.minZ(); wz &lt;= worldRegion.maxZ(); wz++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        for (int wy : surfacesFacet.getWorldColumn(wx, wz)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if (facet.getWorldRegion().encompasses(wx, wy, wz)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                // Content here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then, inside of the inner for-loop, put this piece of code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (noise.noise(wx, wy, wz) &gt; 0.9999) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    templeFacet.setWorld(wx, wy, wz, new Temple());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Finally, outside of the two for loops write </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">region.setRegionFacet(TempleFacet.class, templeFacet); </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Don&#x27;t forget to add this. It takes the seed and generates a new WhiteNoise object with it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@Override public void setSeed(long seed) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    noise = new WhiteNoise(seed);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>The TempleRasterizer</strong></p><p>This is the best part, really. Make a Block field inside of the Rasterizer, and in the Initialize method, set this field equal to something like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stone = CoreRegistry.get(BlockManager.class).getBlock(&quot;CoreAssets:Stone&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We will be using this Block to fill our pyramid.
Call the getFacet(); method on the chunkRegion and assign it to a new TempleFacet. Like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">chunkRegion.getFacet(TempleFacet.class);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Loop through the WorldEntries like so</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (Entry&lt;BaseVector3i, Temple&gt; entry : templeFacet.getWorldEntries().entrySet()) {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is the most vital part. If you go check locally on the chunk itself you will get buildings cut in half!</p><p>Perform these really basic operations to get the size and such for the pyramid</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Vector3i basePosition = new Vector3i(entry.getKey());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int size = TempleRasterizer.getSize();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int min = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int height = (TempleRasterizer.getSize() + 1) / 2;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We then can start looping through our locations! This is the algorithm I used to generate the pyramid.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for (int i = 0; i &lt;= height; i++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    for (int x = min; x &lt;= size; x++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        for (int z = min; z &lt;= size; z++) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            Vector3i chunkBlockPosition = new Vector3i(x, i, z).add(basePosition);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if (chunk.getRegion().encompasses(chunkBlockPosition) &amp;&amp; !region3i1.encompasses(chunkBlockPosition) &amp;&amp;     !region3i2.encompasses(chunkBlockPosition))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                chunk.setBlock(ChunkMath.calcBlockPos(chunkBlockPosition), stone);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    min++;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    size--;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>//TODO: add repo location.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/terasology/TutorialWorldGeneration/edit/develop/docs/docs/advanced/facets-across-borders.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/TutorialWorldGeneration/docs/advanced/plugins"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Plugins</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/TutorialWorldGeneration/docs/advanced/zones"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Zones Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-topics" class="table-of-contents__link"><strong>Basic topics</strong></a></li><li><a href="#basic-setup" class="table-of-contents__link"><strong>Basic setup</strong></a></li><li><a href="#adding-the-meat" class="table-of-contents__link"><strong>Adding the Meat!</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discordapp.com/invite/terasology" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/terasology" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://reddit.com/r/terasology" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://forum.terasology.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://terasology.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">terasology.org</a></li><li class="footer__item"><a href="https://github.com/MovingBlocks/Terasology" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 The Terasology Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/TutorialWorldGeneration/assets/js/styles.66fd2269.js"></script>
<script src="/TutorialWorldGeneration/assets/js/runtime~main.4ece95be.js"></script>
<script src="/TutorialWorldGeneration/assets/js/main.744cc9b5.js"></script>
<script src="/TutorialWorldGeneration/assets/js/1.ca99a909.js"></script>
<script src="/TutorialWorldGeneration/assets/js/2.62f7332e.js"></script>
<script src="/TutorialWorldGeneration/assets/js/26.a3870de1.js"></script>
<script src="/TutorialWorldGeneration/assets/js/27.a14e5467.js"></script>
<script src="/TutorialWorldGeneration/assets/js/935f2afb.20716db0.js"></script>
<script src="/TutorialWorldGeneration/assets/js/17896441.818a151f.js"></script>
<script src="/TutorialWorldGeneration/assets/js/8198f19c.2b08ff71.js"></script>
</body>
</html>